# 7.1-8.2_ADC与DMA多通道采集_打卡gemini.md

## 章节目标回顾
*   掌握 ADC (模数转换器) 的单通道与多通道采集。
*   理解 ADC 的转换触发、转换时间及结果存储。
*   掌握 **DMA (直接存储器存取)** 与 ADC 的配合，实现高效、自动的数据搬运。

## 核心知识点精华
*   **ADC 特性**：12位分辨率 (0~4095)。多通道采集时，由于只有一个数据寄存器 (DR)，必须通过 DMA 及时搬走，否则会被覆盖。
*   **扫描模式 (Scan)**：开启多通道序列转换。
*   **连续转换 vs 单次转换**：
    *   连续转换：转换完一个通道自动开始下一个，或者周而复始。
*   **DMA 的意义**：
    *   它是“快递员”。当 ADC 完成一次转换，DMA 自动把 DR 寄存器里的数搬到我们定义的数组里，全程不需要 CPU 参与。
    *   **配置三要素**：数据源地址（ADC_DR）、目的地址（Array）、搬运数量（通道数）。

## 核心代码注释速查表

### ADC + DMA 初始化
```c
ADC_InitStructure.ADC_ScanConvMode = ENABLE; // 开启扫描模式
ADC_InitStructure.ADC_ContinuousConvMode = ENABLE; // 开启连续转换
ADC_Init(ADC1, &ADC_InitStructure);

DMA_InitStructure.DMA_PeripheralBaseAddr = (uint32_t)&ADC1->DR; // 源：ADC数据寄存器
DMA_InitStructure.DMA_MemoryBaseAddr = (uint32_t)AD_Value;     // 目：内存数组
DMA_InitStructure.DMA_BufferSize = 4;                          // 搬4个通道
DMA_InitStructure.DMA_Mode = DMA_Mode_Circular;                // 循环搬运
DMA_Init(DMA1_Channel1, &DMA_InitStructure);
```

## 核心洞察
*   **数据吞吐量**：ADC 单通道采集是“点对点”，多通道 + DMA 则是“流水线”。
*   **资源解耦**：DMA 释放了 CPU。CPU 只需要在想用数据时去数组里取最新的结果即可，不必被频繁的转换完成中断打断。这在大规模传感、平衡车控制中至关重要。
